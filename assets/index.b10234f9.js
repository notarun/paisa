var R=Object.defineProperty,P=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var A=(s,t,a)=>t in s?R(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,B=(s,t)=>{for(var a in t||(t={}))U.call(t,a)&&A(s,a,t[a]);if(T)for(var a of T(t))W.call(t,a)&&A(s,a,t[a]);return s},_=(s,t)=>P(s,K(t));import{d as h,c as G,p as H,j as J,a as V,F as z,l as u,y as I,W as j,S as Q,i as X,b as Z}from"./vendor.3750775b.js";const ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}};ee();const F="paisa/storage",te=[{name:"Savings/Investments",percentage:20},{name:"Needs",percentage:50},{name:"Wants",percentage:30}],ae=[{income:0,from:h().format("YYYY-MM-DD"),to:h().add(1,"month").format("YYYY-MM-DD")}],S=G(H((s,t)=>({selectedStats:0,stats:[...ae],expenses:[],categories:[...te],totalExpensesThisMonth:()=>{const{expenses:a,currentStats:c}=t();return t().expenses.filter(r=>h(r.date).isBetween(c().from,c().to)).map(r=>r.amount).reduce((r,n)=>r+n,0)},currentStats:()=>t().stats[t().selectedStats],updateSelectedStats:a=>s({selectedStats:a}),updateCurrentStats:a=>{const c=t().stats;c[t().selectedStats]=a,s({stats:c})},createStats:a=>s({stats:[...t().stats,a]}),deleteStats:a=>{const c=t().stats;c.splice(a,1),s({stats:c,selectedStats:c.length-1})},createExpense:a=>s({expenses:[...t().expenses,a]}),updateExpense:(a,c)=>{const r=t().expenses;r[c]=a,s({expenses:r})},deleteExpense:a=>{const c=t().expenses;c.splice(a,1),s({expenses:c})}}),{name:F})),e=J,l=V,w=z,L=({title:s,show:t,children:a,closeModal:c,deleteResource:r,formId:n})=>l("div",{className:`modal modal-lg ${t&&"active"}`,children:[e("a",{className:"modal-overlay","aria-label":"Close",onClick:()=>c()}),l("div",{className:"modal-container container grid-xs",children:[l("div",{className:"modal-header",children:[e("button",{className:"btn btn-clear float-right","aria-label":"Close",onClick:()=>c()}),e("div",{className:"modal-title h5",children:s})]}),e("div",{className:"modal-body",children:e("div",{className:"content",children:a})}),l("div",{className:"modal-footer",children:[n&&e("div",{class:"btn-group btn-group-block mb-2",children:e("button",{form:n,className:"btn btn-primary",children:"Submit"})}),r&&e("div",{class:"btn-group btn-group-block mb-2",children:e("button",{className:"btn btn-error",onClick:()=>(r(),c()),children:"Delete"})})]})]})]}),se=({show:s,action:t,closeModal:a})=>{h().format("YYYY-MM-DD");const{stats:c,selectedStats:r,updateCurrentStats:n,currentStats:d,createStats:m,deleteStats:p}=S(i=>({stats:i.stats,selectedStats:i.selectedStats,updateCurrentStats:i.updateCurrentStats,currentStats:i.currentStats,createStats:i.createStats,deleteStats:i.deleteStats})),x="form-stats",[y,f]=u(""),[E,g]=u(""),[C,v]=u(""),k=()=>{f("0"),v(h().format("YYYY-MM-DD")),g(h().add(1,"month").format("YYYY-MM-DD"))},D=i=>{i.preventDefault();const N={income:parseFloat(y),from:C,to:E};switch(t){case"create":m(N);break;case"update":n(N);break;default:throw"Invalid action."}a()};return I(()=>{if(!s){k();return}switch(t){case"create":break;case"update":const{income:i,from:N,to:Y}=d();f(i.toString()),v(N),g(Y);break;default:throw"Invalid action."}},[s,t]),e(L,{show:s,title:"Income settings",formId:x,closeModal:a,deleteResource:t==="update"&&c.length>1?()=>p(r):void 0,children:l("form",{id:x,className:"form-group",onSubmit:i=>D(i),children:[e("label",{className:"form-label",for:"income",children:"Income"}),e("input",{id:"income",type:"number",value:y,onInput:i=>f(i.target.value),placeholder:"Income",className:"form-input",required:!0}),e("label",{className:"form-label",for:"from",children:"From"}),e("input",{id:"from",type:"date",value:C,onInput:i=>v(i.target.value),placeholder:"From Date",className:"form-input",required:!0}),e("label",{className:"form-label",for:"income",children:"To"}),e("input",{id:"income",type:"date",value:E,onInput:i=>g(i.target.value),placeholder:"To Date",className:"form-input",required:!0})]})})},O=(s,t)=>t*s/100,$=({name:s,percentage:t,amount:a,isActive:c})=>l("tr",{className:`${c&&"active text-bold"}`,children:[e("td",{children:s}),l("td",{children:[t,"%"]}),l("td",{children:["\u20B9 ",a]})]}),ne=()=>{const{currentStats:s,categories:t}=S(n=>({currentStats:n.currentStats,categories:n.categories})),a=(n,d)=>n+d,c=t.map(n=>n.percentage).reduce(a,0),r=t.map(n=>O(n.percentage,s().income)).reduce(a,0);return e(w,{children:e("table",{className:"table",children:l("tbody",{children:[t.map(({name:n,percentage:d})=>e($,{name:n,percentage:d,amount:O(d,s().income)})),e($,{name:"Total",isActive:!0,amount:r,percentage:c})]})})})},re=({show:s,expenseIndex:t,closeModal:a})=>{const c=h().format("YYYY-MM-DD"),{expenses:r,categories:n,createExpense:d,updateExpense:m,deleteExpense:p}=S(o=>({expenses:o.expenses,categories:o.categories.map(M=>M.name),createExpense:o.createExpense,updateExpense:o.updateExpense,deleteExpense:o.deleteExpense})),x="form-expense",[y,f]=u(""),[E,g]=u(""),[C,v]=u(0),[k,D]=u(c),[i,N]=u(""),Y=()=>{f(""),g(""),v(0),D(c)};I(()=>{if(!s){Y();return}if(t!==null){const o=r[t];f(o.description),g(o.category),v(o.amount),D(o.date),N("Edit expense")}else N("Add expense")},[s]);const q=o=>{o.preventDefault();const M={description:y,category:E,amount:C,date:k};t!==null?m(M,t):d(M),Y(),a()};return e(L,{show:s,formId:x,title:i,closeModal:a,deleteResource:t!==null?()=>p(t):void 0,children:l("form",{id:x,className:"form-group",onSubmit:o=>q(o),children:[e("label",{className:"form-label",for:"description",children:"Description"}),e("input",{type:"text",id:"description",value:y,onInput:o=>f(o.target.value),placeholder:"Description",className:"form-input",required:!0}),e("label",{className:"form-label",for:"category",children:"Category"}),e("select",{id:"category",className:"form-select",value:E,onChange:o=>g(o.target.value),required:!0,children:n.map(o=>e("option",{children:o}))}),e("label",{className:"form-label",for:"amount",children:"Amount"}),e("input",{id:"amount",type:"number",value:C,onInput:o=>v(parseFloat(o.target.value)),placeholder:"Amount",className:"form-input",required:!0}),e("label",{className:"form-label",for:"date",children:"Date"}),e("input",{id:"date",type:"date",value:k,onInput:o=>D(o.target.value),placeholder:"Date",className:"form-input",required:!0})]})})},ce=({description:s,category:t,amount:a,showModal:c,expenseIndex:r})=>l("tr",{children:[e("td",{children:s}),e("td",{children:e("span",{className:"chip",children:t})}),l("td",{className:"text-error",children:["\u20B9",a]}),e("td",{children:e("button",{className:"btn btn-link",onClick:()=>c&&c(),children:e("i",{className:"icon icon-edit"})})})]}),oe=()=>{const{expenses:s}=S(m=>({expenses:m.expenses.filter(p=>h(p.date).isBetween(m.currentStats().from,m.currentStats().to,null,"[]"))})),[t,a]=u(!1),[c,r]=u(null),n=(m,p)=>{if(!m){r(null),a(!1);return}if(p!==void 0){r(p),a(!0);return}r(null),a(!0)},d=document.getElementById("modals");return l(w,{children:[e("table",{className:"table",children:e("tbody",{children:s.map((m,p)=>e(ce,_(B({},m),{showModal:()=>n(!0,p)})))})}),e("div",{className:"sticky-bottom py-2",children:e("button",{className:"btn btn-primary btn-block",onClick:()=>n(!0),children:"Add expense"})}),j(e(re,{show:t,expenseIndex:c,closeModal:()=>n(!1)}),d)]})},le=()=>{const{categories:s,expenses:t}=S(a=>({expenses:a.expenses,categories:a.categories}));return e("div",{className:"card",children:e("div",{className:"card-header",children:s.map(({name:a,percentage:c})=>l(w,{children:[e("div",{className:"card-title h5 mt-2",children:a}),l("div",{className:"card-subtitle text-error",children:["\u20B9 ",t.filter(r=>r.category===a).map(r=>r.amount).reduce((r,n)=>r+n,0)]})]}))})})},ie=({showModal:s})=>{const{currentStats:t,totalExpenses:a}=S(c=>({currentStats:c.currentStats,totalExpenses:c.totalExpensesThisMonth()}));return e(w,{children:e("div",{className:"card",children:l("div",{className:"card-header",children:[e("button",{className:"btn btn-link float-right",onClick:()=>s(),children:e("i",{className:"icon icon-edit"})}),e("div",{className:"card-title h5 mt-2",children:"Income"}),l("div",{className:"card-subtitle text-primary",children:["\u20B9 ",t().income]}),e("div",{className:"card-title h5 mt-2",children:"Total Expenses"}),l("div",{className:"card-subtitle text-error",children:["\u20B9 ",a]}),e("div",{className:"card-title h5 mt-2",children:"Total Remaining"}),l("div",{className:"card-subtitle text-success",children:["\u20B9 ",t().income-a]})]})})})},de=({showModal:s})=>{const{stats:t,selectedStats:a,updateSelectedStats:c}=S(n=>({stats:n.stats,selectedStats:n.selectedStats,updateSelectedStats:n.updateSelectedStats})),r=()=>{const n=new Blob([JSON.stringify(localStorage.getItem(F))],{type:"text/json"}),d=window.URL.createObjectURL(n),m=document.createElement("a");m.setAttribute("download",`${Date.now()}.paisa.backup.json`),m.href=d,m.click()};return e(w,{children:l("header",{className:"navbar mb-2",children:[e("section",{className:"navbar-section",children:e("div",{class:"form-group",children:e("select",{class:"form-select",onChange:n=>c(parseInt(n.target.value)),children:t.map((n,d)=>e("option",{value:d,selected:d===a,children:`${n.from} - ${n.to}`}))})})}),l("section",{className:"navbar-section",children:[e("button",{className:"btn btn-primary input-group-btn mr-2",onClick:()=>r(),children:e("i",{className:"icon icon-download"})}),e("button",{className:"btn btn-primary input-group-btn",onClick:()=>s(),children:e("i",{className:"icon icon-plus"})})]})]})})},me=({name:s,isActive:t,onClick:a})=>e("li",{className:`tab-item ${t&&"active"}`,children:e("a",{className:"cursor-pointer",onClick:()=>a(),children:s})});var b;(function(s){s.ExpensesTab="Expenses",s.CategoriesTab="Categories"})(b||(b={}));const ue=()=>{const[s,t]=u(b.ExpensesTab),[a,c]=u({show:!1,action:"create"});I(()=>{setTimeout(()=>new Q(".splide",{arrows:!1}).mount(),0)},[]);const r=document.getElementById("modals");return l("div",{className:"container grid-xs pt-1",children:[e(de,{showModal:()=>c({show:!0,action:"create"})}),e("div",{className:"splide",children:e("div",{className:"splide__track",children:l("ul",{className:"splide__list",children:[e("li",{className:"splide__slide",children:e(ie,{showModal:()=>c({show:!0,action:"update"})})}),e("li",{className:"splide__slide",children:e(le,{})})]})})}),e("ul",{className:"tab tab-block",children:Object.keys(b).map(n=>n).map(n=>e(me,{name:b[n],isActive:s===b[n],onClick:()=>t(b[n])}))}),s===b.ExpensesTab&&e(oe,{}),s===b.CategoriesTab&&e(ne,{}),j(e(se,{show:a.show,action:a.action,closeModal:()=>c({show:!1,action:a.action})}),r)]})};h.extend(X);Z(e(ue,{}),document.getElementById("app"));
